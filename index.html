<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Atividade 2</title>
  <link rel="stylesheet" type="text/css" href="css/style.css">
</head>
<body>
  <div class="section">
    <h1>WizardsVideo</h1>
    <p>Danilo Misura de Oliveira                    - 11006514</p>
    <p>Gabriel da Fonseca Nunes                  - 11201921456<p>
    <p>Thiago Vinícius Pereira Graciano de Souza - 11201722589<p>
  </div>

  <div class="section">
    <h1 class="section-title">Anexos</h1>
    <p class="section-content">
    <p> 

    </p>
    <a href="https://docs.opencv.org/4.x/d4/d13/tutorial_py_filtering.html"> Tutorial Filtragem Imagens OpenCV </a> 
    </p>
    <p>
      <a href="https://docs.opencv.org/4.x/dc/dd3/tutorial_gausian_median_blur_bilateral_filter.html"> 
        Material Complementar Filtragem Imagens OpenCV </a>
    </p>
  </div>

  <h1>Atividade 2</h1>

  <div class="section">
    <h2 class="section-title">Introdução</h2>
    <p class="section-content">
      O processamento de vídeo desempenha um papel fundamental em diversas áreas, 
      como visão computacional, realidade virtual, jogos, vigilância por vídeo, entre outros. 
      <br>O foco deste laboratório é discutir sobre métodos de filtragem a partir
      a biblioteca OpenCV e aplica-las em imagem e vídeo.<br> 
    </p>
    <p class="section-content">
      <h2 class="section-title">Objetivos</h2>
      <ul class="section-content">
        <li>Aplicar cada um dos tipos de filtragem a partir 
          <a href="https://docs.opencv.org/4.x/d4/d13/tutorial_py_filtering.html"> Tutorial Filtragem Imagens OpenCV </a>  
        </li>
        <li>
          Com o programa que faz a leitura da webcam, realize cada um dos experimentos de filtragem do tutorial, na imagem de entrada.
          Salve os arquivos de imagem filtrada gerados através do próprio programa. 
        </li>
      </ul>
    </p>
      
  </div>

  <div class="section">
    <h2 class="section-title">Fundamentos Básicos</h2>
    <p class="section-content">

      <p class="section-content">
        O processamento de vídeo envolve a aplicação de técnicas para manipular, analisar e extrair informações de 
        sequências de imagens em movimento. Para realizar essas tarefas, utilizaremos a biblioteca OpenCV, uma poderosa 
        ferramenta para processamento de imagens e vídeos.       
      </p>
      <p class="section-content">        
        As principais operações básicas que iremos explorar incluem a leitura de imagens e vídeos a partir de arquivos,
        visualização de imagens em janelas, salvamento de imagens em arquivos, captura de imagens da câmera e gravação de vídeos da câmera.
        Além disso, iremos aprender sobre diferentes aspectos, como a velocidade de exibição das imagens em vídeo, a alteração da imagem
        exibida em tempo real, e a realização de operações de processamento de imagem nos programas estudados       
      </p>

      <p class="section-content">        
        Antes de iniciar o trabalho com processamento, é imprescindível obter um melhor entendimento 
        de alguns conceitos fundamentais relacionados ao processamento de vídeo. 
      </p>

      <p class="section-content">
        <b>Imagem e Vídeo</b>: Imagens são representações visuais de objetos, cenas ou fenômenos capturados através de dispositivos ópticos, 
        como câmeras fotográficas ou sensores de imagem. Elas são compostas por uma matriz de elementos chamados de pixels, que são os
        pontos básicos de informação que compõem a imagem.

        Cada pixel contém informações sobre a cor e a intensidade luminosa em um determinado ponto da imagem. Essas informações são armazenadas
        e processadas digitalmente, permitindo a exibição, manipulação e análise das imagens em dispositivos eletrônicos, como computadores, 
        smartphones, tablets e telas de visualização.
        
        As imagens podem ser classificadas em diferentes tipos, como imagens em preto e branco (tons de cinza), imagens em escala de cores 
        (RGB - vermelho, verde e azul) ou imagens em outros espaços de cores, como YUV ou HSV. Além disso, as imagens podem ser estáticas, 
        representando uma única cena, ou sequenciais, formando um vídeo.
        
        No contexto do processamento de vídeo, as imagens são essenciais para realizar diversas tarefas, como detecção de objetos,
        reconhecimento de padrões, análise de movimento, segmentação de objetos, entre outras aplicações. O processamento das imagens
        permite extrair informações relevantes e realizar transformações que podem melhorar sua qualidade, ressaltar características
        ou facilitar a interpretação dos dados visuais.  
      </p>  
      
      <p class="section-content">
        <b>Pixel e Matriz de Pixels</b>: Um pixel é o menor elemento em uma imagem ou quadro de vídeo e representa um valor
        numérico que define sua cor ou intensidade. Uma matriz de pixels é uma grade bidimensional de pixels que compõem uma imagem ou quadro de vídeo.
      </p>

      <p class="section-content">
        <b>Filtros</b>: No processamento de imagens, um filtro é uma função matemática que é aplicada a cada pixel de uma imagem.
        O filtro pode ser usado para melhorar a qualidade da imagem, remover ruído ou adicionar efeitos.

        Alguns exemplos de filtros de processamento de imagens incluem:
        <ul class="section-content">
          <li>Filtros de nitidez: esses filtros aumentam o contraste entre os pixels de uma imagem, tornando-a mais nítida. </li>
          <li>Filtros de suavização: esses filtros reduzem o contraste entre os pixels de uma imagem, tornando-a mais suave. </li>
          <li>Filtros de ruído: esses filtros removem o ruído de uma imagem, tornando-a mais limpa. </li>
          <li>Filtros de efeitos: esses filtros adicionam efeitos especiais a uma imagem, como desfoque, vinheta ou preto e branco. </li>
        </ul>
      </p>
    </p>
  </div>

  <div class="section">
    <h2 class="section-title">Materiais e Métodos</h2>
    <p class="section-content">      
      Este relatório foi divido em duas partes. Nesta primeira parte do laboratório, aplicaremos o métodos de filtragem de Média, Gaussiano, Mediano e Bilateral nas imagens do Lab1 - parte 3 e salvaremos a imagens para comparação. 
      Em seguida, na parte 2, com o programa que faz a leitura da webcam aplicaremos filtros de Média, Gaussiano, Mediano e Bilateral e salvaremos a imagens para comparação. 
    </p>
    <h2 class="section-title">Materiais</h2>
    <p class="section-content">
      A seguir, apresentamos os materiais utilizados em conjunto com suas respectivas descrições, a fim de criar um ambiente de trabalho adequado para a realização da 
      atividade prática no laboratório de Processamento de Vídeo. Esses materiais possibilitam a aquisição, manipulação e processamento eficiente e preciso de imagens e vídeos:
    </p class="section-content">  
    <p class="section-content">
      <ul class="section-content">
        <li class="item">Sistema Operacional Ubuntu 22.04: O sistema operacional Ubuntu 22.04 é uma distribuição Linux amplamente reconhecida pela sua estabilidade e facilidade de uso. Sua utilização
          no laboratório proporciona um ambiente propício para a execução dos programas e tarefas relacionados ao processamento de vídeo.</li>
        <li class="item">Webcam Digital Usb: Essa webcam é utilizada para realizar aquisição de imagens em tempo real durante as atividades práticas do laboratório.</li>
        <li class="item">Linguagem: Python é uma linguagem de programação popular e de alto nível, amplamente utilizada no processamento de vídeo devido à sua facilidade de uso e à 
          disponibilidade de bibliotecas poderosas. Neste laboratório, é utilizada a versão 3.10 ou superior do Python.</li>
        <li class="item">Bibliotecas OpenCV (4.7), Numpy (1.19.5): O OpenCV (Open Source Computer Vision) é uma biblioteca de código aberto amplamente utilizada para o processamento de
          imagem e vídeo. O Numpy é uma biblioteca para Python que oferece suporte a arrays multidimensionais e funções matemáticas avançadas. Ambas as bibliotecas são utilizadas
          para manipular e processar imagens e vídeos no laboratório.</li>
        <li class="item">IDE Visual Studio Code: Visual Studio Code: O Visual Studio Code é uma IDE (Integrated Development Environment) popular e de código aberto, que fornece um ambiente de
          desenvolvimento completo para escrever, depurar e executar programas em Python. É a IDE escolhida para o desenvolvimento das atividades práticas durante o laboratório.</li>
      </ul>

    </p class="section-content"> 

    <h2 class="section-title">Métodos</h2>
    <p class="section-content">
      Nesta primeira parte do trabalho foi desenvolvido o programa que faz a leitura e aplicação de varios filtros na imagem messi5.jpg. 
      Abaixo segue o programa l2_fitros.py desenvolvido juntamente com a descrição do seu funcionamento com diagramas de blocos.  
    </p>    
    <div class="title">L2_filtros.py</div>
    <div class="code-container" id="component-1">
      <textarea readonly>
import numpy as np
import cv2 as cv
import matplotlib.pyplot as plt

def plot_blur(img, save=False):
    """
    Plota o original e o filtrado com o filtro Blur.

    Args:
        img (img): A imagem a ser filtrada.
        save (bool): Se True, salva a imagem filtrada.
    """
    img_blur = cv.blur(img, (3, 3))
    fig, (ax1, ax2)= plt.subplots(nrows=1, ncols=2)
    plt.title("Original vs Blur", loc = "center")
    ax1.imshow(img)
    ax1.set_title("Original")
    ax2.imshow(img_blur)
    ax2.set_title("Blur")
    if save:
        plt.savefig("Blur Media.jpg")
    plt.show()

def plot_gaussian_blur(img, save=False):
    """
    Plota o original e o filtrado com o filtro Gaussiano.

    Args:
        img (img): A imagem a ser filtrada.
        save (bool): Se True, salva a imagem filtrada.
    """
    img_blurg = cv.GaussianBlur(img, (3, 3), 0)
    fig, (ax1, ax2)= plt.subplots(nrows=1, ncols=2)
    plt.title("Original vs Blur Fitro Gaussiano", loc = "center")
    ax1.imshow(img)
    ax1.set_title("Original")
    ax2.imshow(img_blurg)
    ax2.set_title("Blur Fitro Gaussiano")
    if save:
        plt.savefig("FiltroGaussiano.jpg")
    plt.show()

def plot_median_blur(img, save=False):
    """
    Plota o original e o filtrado com o filtro Mediano.
    Args:
        img (img): A imagem a ser filtrada.
        save (bool): Se True, salva a imagem filtrada.
    """
    img_blurmedian = cv.medianBlur(img, 5)
    fig, (ax1, ax2) = plt.subplots(nrows=1, ncols=2)
    plt.title("Original vs Blur Fitro Mediano", loc = "center")
    ax1.imshow(img)
    ax1.set_title("Original")
    ax2.imshow(img_blurmedian)
    ax2.set_title("Blur Fitro Mediano")
    if save:
        plt.savefig("FiltroMediano.jpg")
    plt.show()

def plot_bilateral_filter(img, save=False):
    """
    Plota o original e o filtrado com o filtro Bilateral.
    Args:
        img (img): A imagem a ser filtrada.
        save (bool): Se True, salva a imagem filtrada.
    """
    img_blurbl = cv.bilateralFilter(img, 9, 75, 75)
    fig, (ax1, ax2)= plt.subplots(nrows=1, ncols=2)
    plt.title("Original vs Blur Fitro Bilateral", loc = "center")
    ax1.imshow(img)
    ax1.set_title("Original")
    ax2.imshow(img_blurbl)
    ax2.set_title("Blur Fitro Bilateral")
    if save:
        plt.savefig("Bilateral.jpg")
    plt.show()


# Caminho da Imagem
path_img = "./Laboratorio2/messi5.jpg"

# Leitura da Imagem
img = cv.imread(path_img)

# Verificando se a imagem existe
assert img is not None, "file not could be read"

plot_blur(img, save= True)
plot_gaussian_blur(img, save= True)
plot_median_blur(img, save= True)
plot_bilateral_filter(img, save= True)
        
      </textarea>
      <button class="copy-button" onclick="copyCode('component-1')">Copiar</button>
    </div>
    <div class="title">Diagrama de Blocos L1_filtros.py</div>
    <div>
      <img src="./img/diagrama_l2_filtros.py.jpg" alt="Diagrama" class="fluxograma">
    </div>
    <div class="section-content">
      Abaixo segue o plote da comparação da imagem do messi5.jpg original com os diversos tipos de filtros:
    </div>
    <div class="title">Comparação Messi Original vs Blur Filtro de Media</div>
    <div class="section-content">
      <img src="img/Blur Media.jpg" alt="Diagrama" class="img">
    </div>
    <div class="title">Comparação Messi Original vs Blur Filtro Gaussaino</div>
    <div class="section-content">
      <img src="img/FiltroGaussiano.jpg" alt="Diagrama" class="img">
    </div>
    <div class="title">Comparação Messi Original vs Blur Filtro Mediano</div>
    <div class="section-content">
      <img src="img/FiltroMediano.jpg" alt="Diagrama" class="img">
    </div>
    <div class="title">Comparação Messi Original vs Blur Filtro Bilateral</div>
    <div class="section-content">
      <img src="img/Bilateral.jpg" alt="Diagrama" class="img">
    </div>
    <div class="section-content">
      Na parte 2 do trabalho, foi desenvolvido o programa que faz a leitura da web cam e faz aplicação de varios 
      filtros na imagem captura.Quando for apertado a tecla 'q' é feito a captura da imagem e salva. Abaixo segue
      o programa l2_webcam.py desenvolvido juntamente com a descrição do seu funcionamento com diagramas de blocos. 
    </div>
    <div class="title">L2_webcam.py</div>
    <div class="code-container" id="component-1">
      <textarea readonly>
  import numpy as np
  import cv2 as cv
  import matplotlib.pyplot as plt
  
  cap = cv.VideoCapture(1)
  
  def apply_blur(img):
      """
      Args:
          img (np.Array):
      """
      return cv.blur(img, (3, 3))
  
  def apply_gaussian_blur(img):
      """
      Args:
          img (np.Array):
      """
      return cv.GaussianBlur(img, (3, 3), 0)
  
  def apply_median_blur(img):
      """
      Plota Filtro mediano
      Args:
          img (np.Array):
      """
      return cv.medianBlur(img, 5)
  
  def apply_bilateral_filter(img):
      """
      Filtro Bilateral
      Args:
          img (np.Array):
      """
      return cv.bilateralFilter(img, 9, 75, 75)
  
  if not cap.isOpened():
      print("Cannot open camera")
      exit()
      
  while True:
      # Capture frame-by-frame
      ret, frame = cap.read()
      # if frame is read correctly ret is True
      if not ret:
          print("Can't receive frame (stream end?). Exiting ...")
          break
  
      # Display the resulting frame
      cv.imshow('Original', frame)
  
      # Display the resulting frame
      cv.imshow('Blur', apply_blur(frame))
      
  
      # Display the resulting frame
      cv.imshow('Gaussian Filter', apply_gaussian_blur(frame))
      
      # Display the resulting frame
      cv.imshow('Median Filter', apply_median_blur(frame))
      
      # Display the resulting frame
      cv.imshow('Bilateral Filter', apply_bilateral_filter(frame))
  
      if cv.waitKey(1) == ord('q'):
          cv.imwrite('Imagem.jpg', frame)
          cv.imwrite('BlurFiltroMedia.jpg', apply_blur(frame))    
          cv.imwrite('BlurFitroGaussiano.jpg', apply_gaussian_blur(frame))   
          cv.imwrite('BlurFiltroMediano.jpg', apply_median_blur(frame))  
          cv.imwrite('BlurFitroBilateral.jpg', apply_bilateral_filter(frame))    
          break
  
  # When everything done, release the capture
  cap.release()
  cv.destroyAllWindows()
      </textarea>
      <button class="copy-button" onclick="copyCode('component-1')">Copiar</button>
    </div>
    <div class="section-content">
      <img src="img/diagrama_l2_webcam.py.jpg" alt="Diagrama" class="img">
    </div>
    <div class="section-content">
      Segue a baixo o resultado da aplicação dos filtros na captura de imagem com webcam:
    </div>
    <div class="section">
    <div class="title">Imagem Livro Arte da Guerra Autor</div>
    <div class="section-content">
      <img src="img/Imagem.jpg" alt="Diagrama" class="cap">
    </div>
    <div class="title">Imagem Livro Arte da Guerracom Filtro Media</div>
    <div class="section-content">
      <img src="img/BlurFiltroMedia.jpg" alt="Diagrama" class="cap">
    </div>
    <div class="title">Imagem Livro Arte da Guerra com Filtro Gaussaino</div>
    <div class="section-content">
      <img src="img/BlurFitroGaussiano.jpg" alt="Diagrama" class="cap">
    </div>
    <div class="title">Imagem Livro Arte da Guerra com Filtro Mediano</div>
    <div class="section-content">
      <img src="img/BlurFiltroMediano.jpg" alt="Diagrama" class="cap">
    </div>
    <div class="title">Imagem Livro Arte da Guerra com Filtro Bilateral</div>
    <div class="section-content">
      <img src="img/BlurFiltroBilateral.jpg" alt="Diagrama" class="cap">
    </div>
  </div>
    <h2 class="section-title">Resultados e Análises</h2>
    <p class="section-content">
      Durante a execução das atividades propostas, foram obtidos os seguintes resultados:
    </p>
    <p class="section-content">
      O código apresentado contém a implementação de várias técnicas de suavização de imagem usando OpenCV e Matplotlib. 
      As diferentes técnicas de filtragem aplicadas às imagens são as seguintes: 
      <p class="section-content"> Gaussian Blur: Esta técnica aplica um kernel gaussiano à imagem, o que ajuda a reduzir o ruído e suavizar a imagem. 
        É comumente usado para tarefas de pré-processamento de imagens. Desfoque mediano: esta técnica substitui o valor de cada pixel pelo valor mediano de seus pixels vizinhos. É eficaz na
        remoção de ruído de sal e pimenta da imagem. Filtro Bilateral: O filtro bilateral preserva as bordas enquanto suaviza o restante da imagem. Ele considera as diferenças
        espaciais e de intensidade entre os pixels e é útil para redução de ruído, preservando características importantes da imagem.
      </p class="section-content">
      </p>
    </p>
  </div>

  <div class="section">
    <h2 class="section-title">Conclusões e Comentários Finais</h2>
    <p class="section-content">
      Neste laboratório, aprendemos como aplicar o métodos de filtragens utilizando a biblioteca do opencv e consequimos verifica cada caso de uso de cada filtro em específico.
      
    </p>
  </div>

  <script src="src/script.js"></script>

  <div class="references">
    <h2 class="references-title">Referências</h2>
    <ol class="reference-list">
      <li class="reference-item">OpenCV. "Smoothing Images (OpenCV-Python Tutorials)": <link href="https://docs.opencv.org/4.x/d4/d13/tutorial_py_filtering.html"> https://docs.opencv.org/4.x/d4/d13/tutorial_py_filtering.html</li>
      <li class="reference-item"> MINICHINO, J. HOWSE, J., Learning OpenCV 3 Computer Vision with Python, 2nd Ed, Packt
        Publishing, 2015</li>
      <li class="reference-item">Tutorial OpenCV e Python: <link href="https://docs.opencv.org/master/d6/d00/tutorial_py_root.html"> https://docs.opencv.org/master/d6/d00/tutorial_py_root.html  </li>
      <li class="reference-item">Getting Started with Videos: <link href="https://docs.opencv.org/master/d6/d00/tutorial_py_root.html"> https://docs.opencv.org/4.x/dd/d43/tutorial_py_video_display.html</li>
      <li class="reference-item">Getting Started with Images: <link href="https://docs.opencv.org/4.x/db/deb/tutorial_display_image.html"> https://docs.opencv.org/4.x/db/deb/tutorial_display_image.html</li>
    </ol>
  </div>
</body>
</html>